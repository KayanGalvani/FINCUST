<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fincust-Cadastro de Usuário</title>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<link rel="stylesheet" href="CSS/CUstyle.css">
</head>
<body>

<div class="sidebar">
  <div class="sidebar-header">
    <div class="dashboard-title"></div>
  </div>
  
  <div class="profile-container">
    <div class="profile-info">
      <div class="profile-name"><h2>KAYAN GAVANI</h2></div><br>
    </div>
  </div>
  
  <div class="menu-item">
    <a href="../../DASHBOARD/dashboard.html">Dashboard</a>
  </div>
  
  <div class="menu-item">
    <a href="../listarUsuarios/listarUsuarios.html">Usuários</a>
  </div>
  
  <div class="menu-item">
    <a href="../../CLIENTES/listarClientes/listarClientes.html">Clientes</a>
  </div>
  
  <div class="menu-item">
    <a href="../../GASTOS/listarGastos/listarGastos.html">Gastos</a>
  </div>
</div>

<div class="main-content">
  <div class="header">
    <div class="header-left">
      <div class="dashboard-heading">Usuários</div>
    </div>
    <div class="header-right">
      <div class="logo">
        <img src="IMG/Logo.png" alt="Logo do Projeto" class="logo-img">
      </div>
    </div>
  </div>

  <div class="users-section">
    <h2>Cadastrar Usuário</h2>
    <form class="user-form" onsubmit="register(event)">
      <div class="form-row">
        <div class="form-group form-group-full">
          <label for="user-name">Nome</label>
          <input type="text" id="user-name" name="user-name" required>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="user-cpf">CPF</label>
          <input type="text" id="user-cpf" name="user-cpf" required>
        </div>
        <div class="form-group">
          <label for="user-phone">Telefone</label>
          <input type="text" id="user-phone" name="user-phone" required>
        </div>
        <div class="form-group">
          <label for="user-email">Email</label>
          <input type="email" id="user-email" name="user-email" required>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="user-username">Usuário</label>
          <input type="text" id="user-username" name="user-username" required>
        </div>
        <div class="form-group">
          <label for="user-password">Senha</label>
          <input type="password" id="user-password" name="user-password" required>
        </div>
      </div>
      <div class="form-group">
        <button type="submit" class="btn-submit">Cadastrar</button>
      </div>
    </form>
  </div>
</div>

<!-- Biblioteca Font Awesome para os ícones -->
<script src="JS/CUscript.js"></script>
<script src="https://kit.fontawesome.com/a076d05399.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<script>
// Inicialização do Firebase (certifique-se de que firebaseConfig está correto)
const firebaseConfig = {
  apiKey: "AIzaSyBLTWpeJ1jwbX8vDx8ipz0kg3vypmNd9G8",
  authDomain: "fincust-tc.firebaseapp.com",
  projectId: "fincust-tc",
  storageBucket: "fincust-tc.appspot.com",
  messagingSenderId: "964351323106",
  appId: "1:964351323106:web:2ba0772d10256aacd227bb"
};

firebase.initializeApp(firebaseConfig);

// Funções de carregamento
function showLoading() {
    Swal.fire({
        title: 'Carregando...',
        allowOutsideClick: false,
        onBeforeOpen: () => {
            Swal.showLoading()
        }
    });
}

function hideLoading() {
    Swal.close();
}

// Função de registro
function register(event) {
    event.preventDefault(); // Evita o envio do formulário padrão

    showLoading();

    const email = document.getElementById("user-email").value;
    const password = document.getElementById("user-password").value;

    firebase.auth().createUserWithEmailAndPassword(email, password)
        .then((userCredential) => {
            // Registro bem-sucedido
            console.log('Sucesso', userCredential);
            hideLoading();
            Swal.fire('Sucesso', 'Usuário registrado com sucesso!', 'success');
        })
        .catch((error) => {
            // Tratamento de erros
            console.error('Erro ao registrar', error);
            hideLoading();
            Swal.fire('Erro', 'Erro ao registrar: ' + error.message, 'error');
        });
}
</script>
</body>
</html>
